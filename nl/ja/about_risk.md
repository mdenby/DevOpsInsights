---

copyright:
  years: 2016, 2018
lastupdated: "2018-3-28"

---

{:new_window: target="_blank"}
{:shortdesc: .shortdesc}
{:screen: .screen}
{:codeblock: .codeblock}
{:pre: .pre}

# Deployment Risk について

{{site.data.keyword.DRA_short}} Deployment Risk は、デプロイメント、特にリスクについての豊富な情報を提供します。 この情報を使用し、ポリシーやゲートを利用することにより、デリバリー・パイプラインの中で品質保護を自動化することができます。 これにより、コード・カバレッジおよびテストの傾向とともに、ビルドとデプロイメントの頻度に関するデータが提供されます。
{:shortdesc}

ツールチェーンから {{site.data.keyword.DRA_short}} を開いた後、**「Deployment Risk」**をクリックします。 ここで、分析カテゴリーを選択して、デプロイメントの現状を詳しく調べることができます。  

Deployment Risk を使用することにより、ポリシーやゲートを通じてツールチェーンの中で品質基準を適用することができます。 ポリシーは一連のルールで構成されます。ゲートはポリシーを適用するためのものです。 例えば、ビルドが単体テストやテスト・カバレッジの基準に適合することを求める「単体テストとテスト・カバレッジ」ポリシーを作成することができます。 そして、そのポリシーを参照するゲートを、継続的デリバリーのプロセスに追加します。 そのポリシーを満たさないビルドは、そのゲートで制止されます。 

## リスク分析

リスク分析では、ステージング環境や実稼働環境のアプリケーションに関連するリスクの概要を把握できます。 ドリルダウンしてコード・カバレッジ、テスト・パフォーマンス、セキュリティーのレポートを確認できます。 ダッシュボードには、パイプラインの {{site.data.keyword.DRA_short}} テストからの最新情報が自動的に取り込まれます。

## デプロイメント頻度

実稼働環境、ステージング環境、またはその他の環境のデプロイメント頻度の傾向を確認できます。 このビューには、デプロイメントの成功と失敗も表示されます。 特定のデプロイメントをクリックすると、そのデプロイメントの詳細が表示されます。 アジャイル・チームの場合、デプロイメントの頻度は時間経過とともに高くなる傾向があります。 

## ビルドの頻度

期間の長いブランチのビルド頻度の傾向を確認できます。 このビューにはビルドの成功と失敗も表示されます。 関心のあるポイントをクリックして、ビルドの詳細を確認できます。 アジャイル・チームの場合は、統合ブランチの多数の日次ビルドを確認できます。 そうでないチームは、頻繁にはコードをマージしません。

## 単体テストの傾向

特定のブランチのビルド、または特定の環境にデプロイされているビルドの単体テストの傾向を確認できます。 例えば、マスター・ブランチのビルドのテストの傾向などがわかります。 実稼働環境に移行したビルドでテストが失敗した場合は、対処が必要です。 また、時間経過とともにテスト回数が減少していれば、それは懸念材料になる可能性があります。

## 機能検証テストの傾向

特定のブランチのビルド、または特定の環境にデプロイされているビルドの機能検証テストの傾向を確認できます。 例えば、マスター・ブランチのビルドのテストの傾向などがわかります。 実稼働環境に移行したビルドでテストが失敗した場合は、対処が必要です。 また、時間経過とともにテスト回数が減少していれば、それは懸念材料になる可能性があります。

## コード・カバレッジの傾向

特定の環境にデプロイされているビルドのコード・カバレッジの傾向を確認できます。 例えば、実稼働環境に移行したビルドのコード・カバレッジの傾向などがわかります。 理想的には、実稼働環境に移行するビルドのコード・カバレッジは、時間経過とともに上昇するはずです。 コード・カバレッジが低下している場合は、対処が必要です。

## ポリシー

ポリシーは、デリバリー・パイプラインの中のゲートを制御するルールの集まりです。 特定のゲートにおいて制定されているポリシーをコードが満たしていない、または超えていない場合、リスクのある変更版がリリースされることがないよう、デプロイメントが制止されます。


## 前提条件
{: #prerequisites}

Deployment Risk では、[「{{site.data.keyword.DRA_short}} の概説」](/docs/services/DevOpsInsights/index.html)の説明にはない構成が必要になります。

Deployment Risk を使用するには、以下の 2 つが必要です。

* {{site.data.keyword.deliverypipeline}} または Jenkins プロジェクトのインスタンス
* プロジェクトを評価するために使用するテスト

## 統合情報

Deployment Risk は、{{site.data.keyword.contdelivery_full}} の一部である {{site.data.keyword.deliverypipeline}}、および Jenkins プロジェクトと統合されています。 それらの使用手順は、概略で類似しています。  

{{site.data.keyword.deliverypipeline}} を使用している場合は、以下の手順に従います。

1. {{site.data.keyword.DRA_short}} が管理する[ポリシーとルールを作成する](risk_policies.html)。
2. {{site.data.keyword.DRA_short}} との統合のための[パイプラインのステージを準備する](risk_cd.html)。
3. パイプラインの中に、結果を {{site.data.keyword.DRA_short}} にアップロードする[テスト・ジョブを作成または編集する](risk_cd.html)。
4. それらの結果やポリシーに基づいてプロモーション決定を下す[ゲートをパイプラインに追加する](risk_cd.html)。
5. パイプラインを実行し、[結果を表示する](results.html)。

Jenkins を使用している場合、以下の手順に従います。

1. {{site.data.keyword.DRA_short}} が管理する[ポリシーとルールを作成する](risk_policies.html)。
2. [Jenkins プラグインをインストールし、構成する](https://wiki.jenkins.io/display/JENKINS/IBM+Cloud+DevOps+Plugin)。
3. [プラグインの指示に従ってテスト・ジョブとゲートを作成する](https://wiki.jenkins.io/display/JENKINS/IBM+Cloud+DevOps+Plugin)。 テスト結果が {{site.data.keyword.DRA_short}} にアップロードされて分析され、ゲートがそれらの結果を使用してプロモーション決定を下す。
4. プロジェクトを実行し、[結果を表示する](results.html)。 

コードをどんな方法でビルドしデプロイするかに関係なく、結果は同じです。
基準を満たすビルドは Deployment Risk ゲートを通過し、基準を満たさないビルドは制止されます。 
